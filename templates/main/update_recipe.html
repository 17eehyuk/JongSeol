{% extends 'frame.html' %}

<!--제목-->
{% block title %}
    레시피수정
{% endblock %}

<!--내용-->
{% block content %}


{% set leng = (((recipe_dict|length)-3)/2)|int %}  {# -3: id,author,recipe_name #}           {# /2: drink,drink_amount #}

<h2>{{ recipe_dict['recipe_name'] }} (작성자 : {{ recipe_dict['author'] }})</h2>

<p style="margin-top: 20px; margin-bottom: 20px;">
    레시피명 중복 불가, 각 음료는 600이하, 모든 음료양의 합은 700이하<br>
레시피명은 영어, 한글, 숫자만 가능
</p>

<div id="existing_recipe" hidden>{% for recipe in recipes %}{{ recipe }},{% endfor %}</div> {# 기존레시피 #}

<form method="post">
레시피명 변경
<input type="hidden" id="old_recipe_name" name="recipe_name" value="{{ recipe_dict['recipe_name'] }}">
<input type="text" id="new_recipe_name" name="new_recipe_name" value="{{ recipe_dict['recipe_name'] }}">
<table border="1px" style="margin-top: 20px; margin-bottom: 20px;">
    <tr>
        <th>음료명</th>
        <th>음료양</th>
    </tr>

    
    {% set leng = 0 %}
    {% for i in range(4) %}

        {% set drink = 'drink'+(i|string) %}
        {% set drink_amount = drink+'_amount' %}

        {% if recipe_dict[drink] != None %}
        <tr>
            <td>{{recipe_dict[drink]}}</td>
            <input type="hidden" name="drink{{i}}" value="{{recipe_dict[drink]}}">
            <td><input type="number" id="drink{{i}}_amount" name="drink{{i}}_amount" value="{{recipe_dict[drink_amount]}}" placeholder="{{i}}번음료" oninput="num_only(this); NO_over_600(this)"></td>
        </tr>
        {% else %}
        <input type="hidden" id="row_count" value="{{i}}" disabled>
        {% break %}
        {% endif %}
    {% endfor %}  

        
</table>   



<input type="button" id="update_dect_btn" onclick="update_dect()" value="유효성검사">
<input type="button" id="modify_btn" value="수정하기" onclick="update_modify()" disabled>
<input type="submit" id="update_btn" formaction="/update_recipe_process/" value="저장하기" disabled>
<input type="submit" value="이전으로" formaction="/show_recipe/">

</form>



{% endblock %}